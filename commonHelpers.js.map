{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const apiKey = '14594113-3565582ddf884392468dadf7f';\nconst apiUrl = 'https://pixabay.com/api/';\n\nexport function fetchImages(searchQuery) {\n  const searchParams = new URLSearchParams({\n    key: apiKey,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  const url = `${apiUrl}?${searchParams}`;\n\n  toggleLoader(true);\n\n  return fetch(url)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return response.json();\n    })\n    .then(data => {\n      return data.hits;\n    })\n    .catch(error => {\n      console.error('Error fetching images:', error);\n      return [];\n    })\n    .finally(() => {\n      toggleLoader(false);\n    });\n}\n\nfunction toggleLoader(isLoading) {\n  document.querySelector('.loader').style.display = isLoading\n    ? 'inline-block'\n    : 'none';\n  document.querySelector('.gallery').style.display = isLoading\n    ? 'none'\n    : 'flex';\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderGallery(imageArray) {\n  const galleryContainer = document.querySelector('.gallery');\n\n  if (!galleryContainer) {\n    console.error('Gallery container not found');\n    return;\n  }\n\n  galleryContainer.innerHTML = imageArray.map(generateGalleryItemHTML).join('');\n  initializeLightbox();\n}\n\nfunction generateGalleryItemHTML(image) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = image;\n  return `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${webformatURL}\"\n          data-source=\"${largeImageURL}\"\n          alt=\"${tags}\"\n        />\n        <div class=\"image-details\">\n          ${generateDetailElementHTML('Likes', likes)}\n          ${generateDetailElementHTML('Views', views)}\n          ${generateDetailElementHTML('Comments', comments)}\n          ${generateDetailElementHTML('Downloads', downloads)}\n        </div>\n      </a>\n    </li>`;\n}\n\nfunction generateDetailElementHTML(title, value) {\n  return `\n    <div class=\"details-element\">\n      <p class=\"details-title\">${title}</p>\n      <p class=\"details-value\">${value}</p>\n    </div>`;\n}\n\nfunction initializeLightbox() {\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  lightbox.on('show.simplelightbox', function (e) {\n    e.preventDefault();\n  });\n\n  lightbox.on('error.simplelightbox', function (e) {\n    console.log(e); // some usefull information\n  });\n\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loaderWrapper = document.querySelector('.loader-wrapper');\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const searchData = searchInput.value.trim();\n  gallery.innerHTML = '';\n\n  if (searchData === '') {\n    iziToast.error({\n      id: 'error',\n      message: 'The search field cannot be empty',\n      position: 'topRight',\n      transitionIn: 'fadeInDown',\n    });\n    toggleLoader(false);\n  } else {\n    toggleLoader(true);\n\n    fetchImages(searchData)\n      .then(hits => {\n        if (hits.length === 0) {\n          iziToast.error({\n            id: 'error',\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n            transitionIn: 'fadeInDown',\n          });\n        } else {\n          renderGallery(hits);\n        }\n      })\n      .catch(error => {\n        console.error('Error:', error);\n        iziToast.error({\n          id: 'error',\n          message:\n            'An error occurred while fetching images. Please try again later.',\n          position: 'topRight',\n          transitionIn: 'fadeInDown',\n        });\n      })\n      .finally(() => {\n        toggleLoader(false);\n        searchInput.value = '';\n      });\n  }\n});\n\nfunction toggleLoader(visible) {\n  loaderWrapper.style.display = visible ? 'flex' : 'none';\n}\n"],"names":["apiKey","apiUrl","fetchImages","searchQuery","searchParams","url","toggleLoader","response","data","error","isLoading","renderGallery","imageArray","galleryContainer","generateGalleryItemHTML","initializeLightbox","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","generateDetailElementHTML","title","value","lightbox","SimpleLightbox","form","searchInput","gallery","loaderWrapper","event","searchData","iziToast","hits","visible"],"mappings":"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"}